<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>💌 RSVP – A Secret Dinner Date</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f6dadb;
      --accent:#d32f2f;
      --ink:#2b2b2b;
      --green:#4caf50;
      --orange:#ef5350;
      --gray:#555;
      --paper:#fff8f6;
      --glow: rgba(255,255,255,.6);
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Poppins',sans-serif;
      background:var(--bg); color:var(--ink);
      display:grid; place-items:center;
    }

    .stage{ width:min(680px,92vw); padding:24px; }

    /* ENVELOPE */
    .envelope{
      margin:40px auto;
      width:320px; height:220px; position:relative; cursor:pointer;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.15));
      transition: transform .2s ease;
    }
    .envelope:active{ transform: scale(.98); }

    .env-body{
      position:absolute; inset:0;
      background:#ffefef; border:2px solid #e8c6c6; border-radius:12px;
      overflow:hidden;
    }
    .env-flap{
      position:absolute; left:0; right:0; top:0; height:55%;
      transform-origin: top;
      background: linear-gradient(180deg,#ffc9c9,#ffdfdf 60%,#ffdcdc);
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      border-bottom:2px solid #e8c6c6;
      transition: transform 2s ease-in-out; /* ⬅ 信封蓋子打開 2 秒 */
    }

    /* ENVELOPE - hide */
    .letter{
      position:absolute; left:8%; right:8%; bottom:10px; height:65%;
      background:var(--paper); border:2px solid #f2d6d6; border-radius:10px;
      box-shadow: 0 6px 14px rgba(0,0,0,.07);
      transform: translateY(120%);
      opacity: 0;
      transition: transform 1.4s ease-in-out .8s, opacity .8s ease .8s; /* 延遲 0.8s 抽出 */
    }
    .envelope.open .letter{
      transform: translateY(-120%);
      opacity: 1;
    }

    /* ENVELOPE - showing Ian */
    .letter::after{
      content: "For Ian 💕";
      position: absolute;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Playfair Display', serif;
      font-size: 22px;
      font-weight: 700;
      color: #c2185b;
      opacity: 0;
      pointer-events: none;
    }
    .envelope.open .letter::after{
      opacity: 1;
      animation: fadeOutPeek 0.6s ease 0.6s forwards;
    }
    @keyframes fadeOutPeek{
      to { opacity: 0; }
    }

    .seal{
      position:absolute; top:18%; left:50%; translate:-50% -50%;
      width:56px; height:56px; border-radius:50%;
      background:#ff7a7a;
      box-shadow: inset 0 0 0 6px #ffd6d6, 0 2px 6px rgba(0,0,0,.12);
      display:flex; justify-content:center; align-items:center;
      color:#fff;
      font-family:'Playfair Display',serif;
      font-weight:700;
      font-size:18px;
    }
    .seal::before{
      content:"❤";
      position:absolute;
      inset:0;
      display:flex;
      justify-content:center;
      align-items:center;
      font-size:20px;
      opacity:0.4;
    }
    .seal::after{
      content:"Ian";
      position:relative;
      z-index:2;
      font-size:18px;
      font-weight:700;
      color:#fff;
    }

    /* Hearts burst on open */
    .heart{
      position:fixed; top:42%; left:50%; font-size:18px; opacity:0; pointer-events:none;
      animation: floatUp 1.2s ease forwards;
    }
    @keyframes floatUp{
      from{ transform: translate(-50%,20px) scale(.8); opacity:.0; }
      to{ transform: translate(-50%,-120px) scale(1.2); opacity:1; }
    }

    /* OPENED STATE */
    .envelope.open .env-flap{ transform: rotateX(170deg); }

    /* LETTER CARD */
    .card{
      display:none; opacity:0; transform: translateY(12px);
      transition: opacity .5s ease, transform .5s ease;
      background:var(--paper); border:1.5px solid #f1d7d7; border-radius:16px; padding:24px 22px;
      box-shadow: 0 14px 28px rgba(0,0,0,.12);
    }
    .card.show{ display:block; }
    .card.reveal{ opacity:1; transform: translateY(0); }

    h1{
      margin:0 0 12px;
      text-align:center;
      color:var(--accent);
      font-size:clamp(22px,3.3vw,36px);
      font-family:'Playfair Display',serif;
    }
    .intro{
      text-align:center;
      line-height:1.7;
      margin:10px 4px 22px;
      font-family:'Poppins',sans-serif;
    }
    .dot{ opacity:.85 }
    .spice{ color:#c2185b; font-weight:600; }

    .buttons{
      display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-top:8px;
    }
    button{
      border:0; border-radius:10px; padding:12px 16px; font-size:16px; cursor:pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,.08);
      font-family:'Poppins',sans-serif;
    }
    .btn-yes{
      background:var(--green); color:#fff;
      animation: heartbeat 1.6s ease-in-out infinite;
      box-shadow: 0 0 0 0 rgba(76,175,80,.4);
      transition: box-shadow .2s ease;
    }
    .btn-yes:hover{ box-shadow: 0 0 18px 4px rgba(76,175,80,.35); }
    @keyframes heartbeat{
      0%,40%,80%,100%{ transform: scale(1); }
      20%{ transform: scale(1.04); }
      60%{ transform: scale(1.03); }
    }
    .btn-hint{
      background:var(--orange); color:#fff; position:relative; overflow:hidden;
    }
    .btn-hint::after{
      content:""; position:absolute; inset:0; background: radial-gradient(ellipse at 30% -10%, var(--glow), transparent 60%);
      transform: translateX(-120%); transition: transform .5s ease;
    }
    .btn-hint:hover::after{ transform: translateX(120%); }
    .btn-no{ background:#fff; color:var(--gray); border:1px solid #ddd; }
    .btn-no:active{ transform: translateY(1px); }

    .tap-msg{ text-align:center; color:#8b6b6b; font-size:14px; margin-top:6px }

    .hint-pop{
      position: fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.35); z-index:999;
    }
    .hint-card{
      background:#fff; border-radius:14px; padding:18px 16px; width:min(520px,88vw);
      box-shadow: 0 12px 30px rgba(0,0,0,.2); line-height:1.6;
      font-family:'Poppins',sans-serif;
    }
    .hint-card h3{ margin:0 0 8px; color:#d32f2f; font-family:'Playfair Display',serif; }
    .hint-card button{ margin-top:10px; background:#d32f2f; color:#fff }
    @media (max-width:420px){
      .envelope{ width:280px; height:200px; }
    }
  </style>
</head>
<body>
  <main class="stage">
    <!-- Envelope -->
    <div class="envelope" id="envelope" aria-label="Open invitation envelope" role="button" tabindex="0">
      <div class="env-body"></div>
      <div class="env-flap"></div>
      <div class="letter"></div>
      <div class="seal" aria-hidden="true"></div>
    </div>
    <div class="tap-msg">tap the envelope to open ✨</div>

    <!-- Letter content -->
    <section class="card" id="card" aria-live="polite">
      <h1>💌 RSVP – A Secret Dinner Date 💌</h1>
      <div class="intro">
        Hey love,<br><br>
        Here is <span class="spice">the cute girl from Milksha</span> who misses your hugs a little too much 😉<br>
        You are officially invited to a mystery dinner date ✨<br><br>
        All you need to bring is:<br>
        • Your beautiful smile 😊<br>
        • A comfy outfit (bonus if it can handle a lot of food 🍴)<br>
        • Yourself, on time 💕 (I’ll handle the rest… and maybe steal a kiss or two)<br><br>
        <span class="dot">📅 When: Tonight 7:30 or 8:00</span><br>
        <span class="dot">📍 Where: That’s a secret… but I promise it’ll be worth the wait.</span><br><br>
        Please RSVP below 💕
      </div>

      <div class="buttons">
        <button class="btn-yes" id="yes">✅ I’m in! Mystery + food = perfect.</button>
        <button class="btn-hint" id="hint">🤔 I’m curious, give me a tiny hint…</button>
        <button class="btn-no" id="no">❌ Rain check.</button>
      </div>
    </section>
  </main>

  <!-- hint popup -->
  <div class="hint-pop" id="popup">
    <div class="hint-card">
      <h3>Little secret for you 🔥</h3>
      <ul style="padding-left:18px; margin:6px 0 0;">
        <li>Dress comfy… we might walk a little and sit very close.</li>
        <li>A touch of your favourite scent is very welcome.</li>
        <li>Bring your appetite — I’m bringing the kisses.</li>
      </ul>
      <button id="closePop">Got it 😘</button>
    </div>
  </div>

  <script>
    const env = document.getElementById('envelope');
    const card = document.getElementById('card');

    function burstHearts(){
      const icons = ["❤️","💗","💖","💞","💘","💓"];
      for(let i=0;i<10;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        h.textContent = icons[i % icons.length];
        h.style.left = (50 + (Math.random()*40-20)) + '%';
        h.style.top = (40 + (Math.random()*6-3)) + '%';
        h.style.animationDuration = (0.9 + Math.random()*0.6) + 's';
        document.body.appendChild(h);
        setTimeout(()=>h.remove(), 1200);
      }
    }

    function openEnvelope(){
      if(env.classList.contains('open')) return;
      env.classList.add('open');
      burstHearts();
      setTimeout(()=>{ card.classList.add('show'); }, 2000); 
      setTimeout(()=>{ card.classList.add('reveal'); }, 2100);
    }

    env.addEventListener('click', openEnvelope);
    env.addEventListener('keydown', (e)=>{
      if(e.key==='Enter' || e.key===' ') { e.preventDefault(); openEnvelope(); }
    });

    // RSVP actions
    document.getElementById('yes').addEventListener('click', ()=>{
      window.location.href = 'yes_page.html';
    });

    // hint popup
    const popup = document.getElementById('popup');
    document.getElementById('hint').addEventListener('click', ()=>{
      popup.style.display='grid';
    });
    document.getElementById('closePop').addEventListener('click', ()=>{
      popup.style.display='none';
    });
    popup.addEventListener('click',(e)=>{
      if(e.target===popup) popup.style.display='none';
    });

    document.getElementById('no').addEventListener('click', ()=>{
      window.location.href = 'no_page.html';
    });
  </script>
</body>
</html>
